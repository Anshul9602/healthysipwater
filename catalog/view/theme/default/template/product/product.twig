{{ header }}
<script src="catalog/view/javascript/jquery.zoom.js" type="text/javascript"></script>
<style>
	.panel-default {
		border: none;
		box-shadow: none;
		border-top: thin solid #f1f1f1;
		border-radius: 0;
	}

	.panel-body {
		border: none !important;
		padding: 10px;
		margin-top: -15px !important;
		text-align: justify;
	}

	.panel-default .panel-heading {
		padding: 0;
		border-radius: 0;
		color: #212121;

		border-color: #ccc;
		background: none;
		border-left: none;
		border-right: none;
	}

	.panel-title {
		font-size: 14px;
	}

	.panel-body {
		padding: 0;
		margin-top: 15px;
		margin-bottom: 15px;
	}

	.panel-body ul {
		margin-top: 10px;
	}

	.panel-title a {
		display: block;
		padding: 15px;
		text-decoration: none;
		color: #333;
	}

	.more-less {
		float: right;
	}

	.wb {
		color: rgb(5, 5, 5);
		font-weight: 600;
		border: #212121;
	}

	.wb:hover {
		background-color: #1677bc;
		color: white !important;
	}

	.glyphicon {
		font-size: 10px;
		color: #666;
		font-weight: 100;
	}

	.btn-round {
		padding: 0;
	}

	.zoom {
		cursor: zoom-in;
		z-index: 9999999;
	}

	.file_input {
		display: none;
		border: thin solid #ccc;
		width: 120px;
		margin: 5px;
		padding: 7.5px 5px;
		text-align: center;
		float: left;
	}

	.slick-slide .slick-track {
		width: 100% !important;
	}

	@media screen and(max-width: 650px) {
		.hidden-mobile {
			display: none;
		}

		#button-cart {
			margin-bottom: 10px;
		}

		.desktop_slider {
			display: none !important;
		}

		.slider_mob,
		.slider-mob-box {
			display: inline !important;
		}

		.pro-nav {
			margin-top: -10px;
		}

		.slider_mob {
			margin-top: -45px !important;
		}

		.product-details-des {
			margin-top: 18px;
		}

		.product-details-des .pro-review {
			width: 100%;
		}

		.slick-slider .slick-list,
		.slick-slider .slick-track {
			transform: none !important;
			width: 100% !important;
		}

		.slick-dots {
			margin-left: -40px !important;
		}
	}

	@media screen and(min-width: 651px) {
		.desktop_slider {
			display: inline !important;
		}

		.slider_mob,
		.slider-mob-box {
			display: none !important;
		}

		.btn-primary {
			width: 250px;
			float: left;
			margin-left: 10px;
		}

		#button-cart {
			margin-left: 0;
		}

		select,
		input {
			max-width: 400px;
		}
	}

	.imgth {
		max-width: 100px;
	}

	.btn-wishilist {
		width: 40px;
		height: 40px;
		margin-top: -2px;
	}

	.btn-cart2 {
		width: 35px;
		height: 35px;
		margin-top: 2px;
		line-height: 2.8;
	}

	#button-customization {
		margin-top: 0;
	}
	.mob1 {
		display: none !important;
	}
	@media(max-width: 850px) {
		.mob1 {
			display: block !important;
		}
		.desktop_slider {
			display: none !important;
		}
	}
	@media(min-width: 1250px) {
		.p-container {
			max-width: 90%;
		}
	}

	#product-description ul {
		list-style-type: disc;
		padding-left: 15px;
	}

	#product-description ul li {
		list-style: disc;
	}

	.breadcrumb:last-chid {
		display: none;
	}
</style>
<!-- breadcrumb area start -->

<style>
	.addthis_button_facebook_like {
		margin-left: -15px;
	}
	.thum1 {
		cursor: pointer;
	}
	.offer_block {
		padding: 20px 40px 20px 15px;
		background-color: #dff2fe;
		color: #333;
		width: 100%;
		min-width: 200px;
		font-size: 14px;
		text-transform: uppercase;
	}

	.ob2 {
		background-color: #e6fdf8;
	}

	.product-details-des .like-icon a {
		margin-right: 0;
	}

	@media screen and(max-width: 650px) {
		.hidden-phone {
			display: none;
		}

		.row,
		.col-sm-12 {
			padding: 0;
		}

		.canvas-container-outer {
			width: 300px !important;
		}
	}
</style>
<!-- breadcrumb area end -->
<div class="p-container">
	<div class="row">
		<div id="content " class="col-sm-12">
			<div class="row">
				{% if thumb or images %}
					<div class="col-lg-1 col-md-8 desktop_slider">
						<div class="">
							{% if thumb %}
								<div class="thum1 mt-5">
									<img src="{{ thumb }}" alt="product-details"/>
								</div>
							{% endif %}
							{% if images %}
								{% for image in images %}
									<div class="thum1">
										<img src="{{ image.popup }}" alt="product-details"/>
									</div>
								{% endfor %}
							{% endif %}
						</div>
					</div>
					<div class="col-md-12 col-lg-4 desktop_slider" style="margin: 50px 30px 0 0">
						<div id="s_wrap">
							<div class="product-large-slider">
								{% if thumb %}
									<div class="pro-large-img">
										<img id="main_cover" src="{{ thumb }}" alt="product-details"/>
									</div>
								{% endif %}
								{% if images %}
									{% for image in images %}
										<div class="pro-large-img">
											<img id="main_cover" src="{{ image.popup }}" alt="product-details"/>
										</div>

									{% endfor %}
								{% endif %}
							</div>
						</div>
					</div>
				{% endif %}

				<div class="col-md-12 slider_mob mob1">
					<div class="pro-nav slick-row-10 slick-arrow-style">
						{% if thumb or images %}
							{% if thumb %}
								<div class="pro-nav-thumb">
									<img src="{{ thumb }}" alt="product-details"/>
								</div>
							{% endif %}
							{% if images %}
								{% for image in images %}
									<div class="pro-nav-thumb">
										<a class="thumbnail" href="{{ image.popup }}" title="{{ heading_title }}">
											<img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}"/></a>
									</div>
								{% endfor %}
							{% endif %}
						{% endif %}
					</div>
				</div>

				<div class="col-md-12 col-lg-6">
					<div style="background: none" class="breadcrumb-area hidden-phone">
						<div class="container p-container">
							<div class="row">
								<div class="col-12">
									<div class="breadcrumb-wrap">
										<nav aria-label="breadcrumb">
											<ul class="breadcrumb">
												{% for breadcrumb in breadcrumbs %}
													<li class="breadcrumb-item">
														<a href="{{ breadcrumb.href }}">{{
                            breadcrumb.text
                          }}</a>
													</li>
												{% endfor %}
											</ul>
										</nav>
									</div>
								</div>
							</div>
						</div>
					</div>
					{% if thumb %}
						<h3 class="product-name">{{ heading_title }}</h3>
					{% endif %}
					<div class="ratings d-flex">
						<span class="fa fa-stack">
							<i class="fa fa-star-o fa-stack-1x"></i>
						</span>
						<span class="fa fa-stack">
							<i class="fa fa-star-o fa-stack-1x"></i>
						</span>
						<span class="fa fa-stack">
							<i class="fa fa-star-o fa-stack-1x"></i>
						</span>
						<span class="fa fa-stack">
							<i class="fa fa-star-o fa-stack-1x"></i>
						</span>
						<span class="fa fa-stack">
							<i class="fa fa-star-o fa-stack-1x"></i>
						</span>
					</div>

					<div style="padding-top: 10px; margin-top: -10px" class="price-box">
						{% if price %}
							{% if not special %}

								<h3 class="price-regular" id="p_price" style="color: #8b0000">
									{{ price }}
								</h3>

							{% else %}

								<h6 class="price-old">
									<del>{{ price }}</del>
									&nbsp&nbsp<span style="text-decoration: none; color: #1677bc">{{ percent }}% OFF</span>
								</h6>

								<h3 class="price-regular" id="p_price" style="color: #8b0000">
									{{ special }}
								</h3>

							{% endif %}
							{% if points %}
								<li>{{ text_points }}
									{{ points }}</li>
							{% endif %}
							{% if discounts %}
								<li>
									<hr/>
								</li>
								{% for discount in discounts %}
									<li>
										{{ discount.quantity }}{{ text_discount }}{{ discount.price }}
									</li>
								{% endfor %}
							{% endif %}
						{% endif %}
					</div>
					<div
						style="margin-top: 20px" class="like-icon">
						<!-- AddThis Button BEGIN -->
						<div class="addthis_toolbox addthis_default_style">
							<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
							<a class="addthis_button_tweet"></a>
							&nbsp&nbsp&nbsp<a class="addthis_button_pinterest_pinit"></a>
							<a class="addthis_counter addthis_pill_style"></a>
						</div>
						<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-515eeaf54693130e"></script>
						<!-- AddThis Button END -->
					</div>

					<hr/>

					<div id="product">
						{% if options %}
							{% for option in options %}
								{% if option.type ==
            'select' %}
									<div class="form-group{% if option.required %} required {% endif %}">
										<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
										<select name="option[{{ option.product_option_id }}]" id="input-option{{ option.product_option_id }}" class="form-control select_option">
											<option value="">{{ text_select }}</option>
											{% set i = 0 %}
											{% for option_value in
                option.product_option_value %}
												{% if option_value.price %}

													<option data-sign=" {{ option_value.price_prefix }}" data-money="{{ option_value.price }}" data-desind="{{ i }}" value="{{ option_value.product_option_value_id }}">
														{{ option_value.name }}

														({{ option_value.price_prefix }}{{ option_value.price }})
													</option>
													{% set i = i + 1 %}
												{% endif %}
											{% endfor %}
										</select>
									</div>
								{% endif %}
								{% if option.type == 'radio' %}
									<div class="radio_input form-group{% if option.required %} required {% endif %}">
										<label class="control-label">{{ option.name }}</label>
										<div id="input-option{{ option.product_option_id }}">
											{% for option_value in option.product_option_value %}
												<div class="radio">
													<label>
														<input type="radio" name="option[{{ option.product_option_id }}]" value="{{ option_value.product_option_value_id }}"/>
														{% if option_value.image %}
															<img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail"/>
														{% endif %}
														{{ option_value.name }}
														{% if option_value.price %}
															({{ option_value.price_prefix
                    }}{{ option_value.price }})
														{% endif %}
													</label>
												</div>
											{% endfor %}
										</div>
									</div>
								{% endif %}
								{% if option.type == 'checkbox' %}
									<div class="form-group{% if option.required %} required {% endif %}">
										<label class="control-label">{{ option.name }}</label>
										<div id="input-option{{ option.product_option_id }}">
											{% for option_value in option.product_option_value %}
												<div class="checkbox">
													<label>
														<input type="checkbox" name="option[{{ option.product_option_id }}][]" value="{{ option_value.product_option_value_id }}"/>
														{% if option_value.image %}
															<img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail"/>
														{% endif %}
														{{ option_value.name }}
														{% if option_value.price %}
															({{ option_value.price_prefix
                    }}{{ option_value.price }})
														{% endif %}
													</label>
												</div>
											{% endfor %}
										</div>
									</div>
								{% endif %}
								{% if option.type == 'text' %}
									<div class="form-group{% if option.required %} required {% endif %}">
										<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
										<input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control"/>
									</div>
								{% endif %}
								{% if option.type == 'textarea' %}
									<div class="form-group{% if option.required %} required {% endif %}">
										<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
										<textarea name="option[{{ option.product_option_id }}]" rows="5" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control">{{ option.value }}</textarea>
									</div>
								{% endif %}
								{% if option.type == 'file' %}
									<div class="file_input form-group{% if option.required %} required {% endif %}">
										<img class="filePreview" style="display: none; max-width: 50px; margin: auto"/>

										<label class="control-label">{{ option.name }}</label>
										<button type="button" id="button-upload{{ option.product_option_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default upload-btn btn-block">
											<i class="fa fa-upload"></i>
											{{ button_upload }}
										</button>
										<input type="hidden" name="option[{{ option.product_option_id }}]" value="" id="input-option{{ option.product_option_id }}"/>
									</div>

								{% endif %}
								{% if option.type == 'date' %}
									<div class="form-group{% if option.required %} required {% endif %}">
										<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
										<div class="input-group date">
											<input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD" id="input-option{{ option.product_option_id }}" class="form-control"/>
											<span class="input-group-btn">
												<button class="btn btn-default" type="button">
													<i class="fa fa-calendar"></i>
												</button>
											</span>
										</div>
									</div>
								{% endif %}
								{% if option.type == 'datetime' %}
									<div class="form-group{% if option.required %} required {% endif %}">
										<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
										<div class="input-group datetime">
											<input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-option{{ option.product_option_id }}" class="form-control"/>
											<span class="input-group-btn">
												<button type="button" class="btn btn-default">
													<i class="fa fa-calendar"></i>
												</button>
											</span>
										</div>
									</div>
								{% endif %}
								{% if option.type == 'time' %}
									<div class="form-group{% if option.required %} required {% endif %}">
										<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
										<div class="input-group time">
											<input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="HH:mm" id="input-option{{ option.product_option_id }}" class="form-control"/>
											<span class="input-group-btn">
												<button type="button" class="btn btn-default">
													<i class="fa fa-calendar"></i>
												</button>
											</span>
										</div>
									</div>
								{% endif %}
							{% endfor %}
						{% endif %}

						<div style="display: inline-block; width: 100%; margin-bottom: 0px" class="form-group">
							<div id="counter-btn" style="
																																																								                  padding: 0px;
																																																								                  padding-left: 10px;
																																																								                  margin-top: -12px;
																																																								                  max-width: 300px;
																																																								                " class="row">
								<div style="
																																																															                    cursor: pointer;
																																																															                    height: 40px;
																																																															                    text-align: center;
																																																															                    border: thin solid #ccc;
																																																															                  " class="col-sm-2 col-4 minus-icon">
									<li style="
																																																																						                      font-size: 12px;
																																																																						                      margin: auto;
																																																																						                      line-height: 40px;
																																																																						                      text-align: center;
																																																																						                    " id="less_quantity" class="fa fa-minus"></li>
								</div>
								<div style="padding-left: 0px; height: 40px; padding-right: 0px" class="col-sm-3 col-4">
									<input name="quantity" type="text" style="
																																																																						                      box-shadow: none;
																																																																						                      text-align: center;
																																																																						                      border-radius: 0px;
																																																																						                      width: 100%;
																																																																						                      height: 40px;
																																																																						                      background-color: transparent;
																																																																						                      cursor: default;
																																																																						                    " id="input-quantity" value="1" class="form-control"/>
								</div>
								<div style="
																																																															                    cursor: pointer;
																																																															                    height: 40px;
																																																															                    text-align: center;
																																																															                    border: thin solid #ccc;
																																																															                  " class="col-sm-2 col-4 minus-icon">
									<li style="
																																																																						                      font-size: 12px;
																																																																						                      height: 50px;
																																																																						                      line-height: 40px;
																																																																						                      text-align: center;
																																																																						                    " id="add_quantity" class="fa fa-plus"></li>
								</div>
							</div>

							<input type="hidden" name="product_id" value="{{ product_id }}"/>

							<button type="button" style="margin-top: 20px" id="button-cart" data-loading-text="{{ text_loading }}" class="btn btn-primary btn-lg btn-block">
								{{ button_cart }}
							</button>
							<br/>
							<br/><br/>
							<button style="padding: 10px 0px; margin-top: 10px" type="button" data-toggle="tooltip" class="wb btn btn-default" title="{{ button_wishlist }}" onclick="wishlist.add('{{ product_id }}');">
								ADD TO WISHLIST &nbsp;<i style="color: rgb(185, 130, 123, 0.9)" class="fa fa-heart-o"></i>
							</button>
						</div>

						<div style="padding: 0px" class="col-sm-12 col-12 mt-2">
							<p id="product-description"></p>
							<div style="text-align: left" class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
								{{ product.description }}
							</div>
							<!-- panel-group -->
						</div>
					</div>
				</div>
			</div>

			{% if products %}
				<br/><br/>
				<div class="row">
					<div class="col-sm-12 text-center">
						<h3>{{ text_related }}</h3>
					</div>
				</div>
				<br/><br/>

				<div class="row d-flex justify-content-center">
					{% set i = 0 %}
					{% for product in products %}

						<div
							class="col-sm-3 col-6 product-boxes mb-4">
							<!-- product grid start -->
							<div class="product-item">
								<figure class="product-thumb">
									<a href="{{ product.href }}">
										<img style="z-index: 99999999" src="{{ product.thumb }}" class="img-responsive"/>
									</a>
								</figure>
								<p class="description" style="display: none">
									{{ product.description }}
									<input type="hidden" class="pid" value=""/>
								</p>
								<div class="product-caption text-center">
									<h6 class="product-name">
										<a href="{{ product.href }}">
											{{ product.name }}
										</a>
									</h6>

									{% if product.price %}
										{% if not product.special %}
											{{ product.price }}
										{% else %}
											<div class="price-box">
												<span class="price-regular" style="color: #8b0000">{{
                  product.special
                }}</span>
												<span style="text-decoration: none; color: #1677bc">{{ product.percent }}% OFF</span>

												<span class="price-old">
													<del>{{ product.price }}</del>
												</span>
											</div>
										{% endif %}
									{% endif %}
								</div>
							</div>
							<!-- product grid end -->
						</div>

					{% endfor %}
					{% set i = i + 1 %}
				</div>
				<br/><br/>
				<br/><br/>
			{% endif %}
		</div>
	</div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-body text-center">
				<p>Tap to zoom</p>
				<div class="row">
					<div class="col-sm-12 zoom">
						<img class="img-responsive" id="pop-zoom" style="margin: auto; padding: 20px" src=""/>
					</div>
				</div>
				<br/>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">
					Close
				</button>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	$("body").on("change", "input[type='radio']", function () {
var x = $.trim($("input[type='radio']:checked").parent().text());
if (x == "Upload Now") {
$(".file_input").fadeIn();
} else {
$(".file_input").fadeOut();
}
});

$("select[name='recurring_id'], input[name=\"quantity\"]").change(function () {
$.ajax({
url: "index.php?route=product/product/getRecurringDescription",
type: "post",
data: $("input[name='product_id'], input[name='quantity'], select[name='recurring_id']"),
dataType: "json",
beforeSend: function () {
$("#recurring-description").html("");
},
success: function (json) {
$(".alert, .text-danger").remove();

if (json["success"]) {
$("#recurring-description").html(json["success"]);
}
}
});
});

var slides_to_show = $(".imgth").length;

$(".slider-for").slick({
slidesToShow: 1,
slidesToScroll: 1,
arrows: true,
fade: false,
asNavFor: ".slider-nav",
nextArrow: '<button style="width: 30px;height:30px;color:#fff;top: 200px;position: absolute;right: 0px;z-index: 99;" class="btn-round left"><svg style="fill:#fff; margin-top:-3px; width:15px" viewBox="0 0 100 100"><path d="M 20,50 L 60,90 L 60,85 L 25,50  L 60,15 L 60,10 Z" class="arrow" transform="translate(100, 100) rotate(180) "></path></svg></button>',
prevArrow: '<button style="width: 30px;height:30px;color:#fff;top: 200px;position: absolute;left: 0px;z-index: 99;" class="btn-round right"><svg style="fill:#fff; margin-top:-3px; width:15px" viewBox="0 0 100 100"><path d="M 20,50 L 60,90 L 60,85 L 25,50  L 60,15 L 60,10 Z" class="arrow"></path></svg></button>'
});

$(".slider-nav").slick({
slidesToShow: slides_to_show,
vertical: true,
slidesToScroll: 1,
asNavFor: ".slider-for",
dots: true,
arrows: true,
focusOnSelect: true,
nextArrow: '<button style="width: 30px;height:30px;color:#fff;top: 200px;position: absolute;right: 0px;z-index: 99;" class="btn-round left"><svg style="fill:#fff; margin-top:-3px; width:15px" viewBox="0 0 100 100"><path d="M 20,50 L 60,90 L 60,85 L 25,50  L 60,15 L 60,10 Z" class="arrow" transform="translate(100, 100) rotate(180) "></path></svg></button>',
prevArrow: '<button style="width: 30px;height:30px;color:#fff;top: 200px;position: absolute;left: 0px;z-index: 99;" class="btn-round right"><svg style="fill:#fff; margin-top:-3px; width:15px" viewBox="0 0 100 100"><path d="M 20,50 L 60,90 L 60,85 L 25,50  L 60,15 L 60,10 Z" class="arrow"></path></svg></button>'
});
$("#add_quantity").click(function () {
var b = Number($("#input-quantity").val()) + 1;
$("#input-quantity").val(b);
});

$("#less_quantity").click(function () {
var b = Number($("#input-quantity").val()) - 1;
if (b < 0) {
b = 0;
}
$("#input-quantity").val(b);
});
</script>
<script type="text/javascript">
	$("#button-cart").on("click", function () {
$.ajax({
url: "index.php?route=checkout/cart/add",
type: "post",
data: $("#product input[type='text'], #product input[type='hidden'], #product input[type='radio']:checked, #product input[type='checkbox']:checked, #product select, #product textarea"),
dataType: "json",
beforeSend: function () {
$("#button-cart").button("loading");
},
complete: function () {
$("#button-cart").button("reset");
},
success: function (json) {
$(".alert, .text-danger").remove();
$(".form-group").removeClass("has-error");

if (json["error"]) {
if (json["error"]["option"]) {
for (i in json["error"]["option"]) {
var element = $("#input-option" + i.replace("_", "-"));

if (element.parent().hasClass("input-group")) {
element.parent().after('<div class="text-danger">' + json["error"]["option"][i] + "</div>");
} else {
element.after('<div class="text-danger">' + json["error"]["option"][i] + "</div>");
}
}
}

if (json["error"]["recurring"]) {
$("select[name='recurring_id']").after('<div class="text-danger">' + json["error"]["recurring"] + "</div>");
}

// Highlight any found errors
$(".text-danger").parent().addClass("has-error");
}

if (json["success"]) { // Need to set timeout otherwise it wont update the total
setTimeout(function () {
$("#cart_count").html(json["total"]);
}, 100);

$(".minicart-btn").click();

$("#cart > ul").load("index.php?route=common/cart/info #cart li");
$(".minicart-pricing-box > ul").load("index.php?route=common/cart/info .minicart-pricing-box ul li");
$(".minicart-button").fadeIn();
}
},
error: function (xhr, ajaxOptions, thrownError) {
alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
}
});
});
//
</script>
<script type="text/javascript">
	$(".date").datetimepicker({pickTime: false});

$(".datetime").datetimepicker({pickDate: true, pickTime: true});

$(".time").datetimepicker({pickDate: false});

var ref = "";
$(document).on("click", ".upload-btn", function () {
$(".upload-btn").removeClass("acc");
$(this).addClass("acc");
});
$(document).on("change", 'input[name="file"]', function () {
ref = this;
if (this.files && this.files[0]) {
var reader = new FileReader();

reader.onload = function (e) {
$(".acc").siblings(".filePreview").attr("src", e.target.result);
$(".acc").siblings(".filePreview").fadeIn();
};

reader.readAsDataURL(this.files[0]); // convert to base64 string
}
});

$("button[id^='button-upload']").on("click", function () {
var node = this;

$("#form-upload").remove();

$("body").prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

$("#form-upload input[name='file']").trigger("click");

if (typeof timer != "undefined") {
clearInterval(timer);
}

timer = setInterval(function () {
if ($("#form-upload input[name='file']").val() != "") {
clearInterval(timer);

$.ajax({
url: "index.php?route=tool/upload",
type: "post",
dataType: "json",
data: new FormData($("#form-upload")[0]),
cache: false,
contentType: false,
processData: false,
beforeSend: function () {
$(node).button("loading");
},
complete: function () {
$(node).button("reset");
},
success: function (json) {
$(".text-danger").remove();

if (json["error"]) {
$(node).parent().find("input").after('<div class="text-danger">' + json["error"] + "</div>");
}

if (json["success"]) {
alert(json["success"]);

$(node).parent().find("input").val(json["code"]);
}
if (json["error"]) {
ref = "";
$(node).parent().find("input").after('<div class="text-danger">' + json["error"] + "</div>");
}
},
error: function (xhr, ajaxOptions, thrownError) {
alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
}
});
}
}, 500);
});

//
</script>
<script type="text/javascript">
	$("#review").delegate(".pagination a", "click", function (e) {
e.preventDefault();

$("#review").fadeOut("slow");

$("#review").load(this.href);

$("#review").fadeIn("slow");
});

$("#review").load("index.php?route=product/product/review&product_id=       <?php echo $product_id; ?>");

$("#button-review").on("click", function () {
$.ajax({
url: "index.php?route=product/product/write&product_id=       <?php echo $product_id; ?>",
type: "post",
dataType: "json",
data: $("#form-review").serialize(),
beforeSend: function () {
$("#button-review").button("loading");
},
complete: function () {
$("#button-review").button("reset");
},
success: function (json) {
$(".alert-success, .alert-danger").remove();

if (json["error"]) {
$("#review").after('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + json["error"] + "</div>");
}

if (json["success"]) {
$("#review").after('<div class="alert alert-success"><i class="fa fa-check-circle"></i> ' + json["success"] + "</div>");

$("input[name='name']").val("");
$("textarea[name='text']").val("");
$("input[name='rating']:checked").prop("checked", false);
}
}
});
});

$(document).ready(function () {
$(".thumbnails").magnificPopup({
type: "image",
delegate: "a",
gallery: {
enabled: true
}
});
});

$("#exampleModal").on("shown.bs.modal", function () {
$("#pop-zoom").attr("src", $(".slick-current img").attr("src"));
});
</script>
<script>
	$(document).ready(function (e) {
var pp = $("#p_price").html().replace(/\,/g, "");
var price = pp.substr(1);
var sig = $("#p_price").html().slice(0, 1);
var des = `{{ description }}`;
var desarray = des.split("###amc###");
console.log(des);
$("#product-description").html(desarray[0]);

$(".select_option").change(function () {
var x = $(this).find("option:selected").attr("data-money");
var desind = $(this).find("option:selected").attr("data-desind");

if (x) {
x = x.substr(1).replace(/,/g, "");
if ($(this).find("option:selected").attr("data-sign") == "+") {
var n = parseFloat(price) + parseFloat(x);
} else {
var n = parseFloat(price) - parseFloat(x);
}

$("#p_price").html(sig + n.toFixed(0));
} else {
$("#p_price").html(sig + price);
}
$("#product-description").html(desarray[desind]);
});
});
</script>

<script type="text/javascript">
	$("select[name='recurring_id'], input[name=\"quantity\"]").change(function () {
$.ajax({
url: "index.php?route=product/product/getRecurringDescription",
type: "post",
data: $("input[name='product_id'], input[name='quantity'], select[name='recurring_id']"),
dataType: "json",
beforeSend: function () {
$("#recurring-description").html("");
},
success: function (json) {
$(".alert-dismissible, .text-danger").remove();

if (json["success"]) {
$("#recurring-description").html(json["success"]);
}
}
});
});
</script>
<script type="text/javascript">
	$("#button-cart").on("click", function () {
$.ajax({
url: "index.php?route=checkout/cart/add",
type: "post",
data: $("#product input[type='text'], #product input[type='hidden'], #product input[type='radio']:checked, #product input[type='checkbox']:checked, #product select, #product textarea"),
dataType: "json",
beforeSend: function () {
$("#button-cart").button("loading");
},
complete: function () {
$("#button-cart").button("reset");
},
success: function (json) {
$(".alert-dismissible, .text-danger").remove();
$(".form-group").removeClass("has-error");

if (json["error"]) {
if (json["error"]["option"]) {
for (i in json["error"]["option"]) {
var element = $("#input-option" + i.replace("_", "-"));

if (element.parent().hasClass("input-group")) {
element.parent().after('<div class="text-danger">' + json["error"]["option"][i] + "</div>");
} else {
element.after('<div class="text-danger">' + json["error"]["option"][i] + "</div>");
}
}
}

if (json["error"]["recurring"]) {
$("select[name='recurring_id']").after('<div class="text-danger">' + json["error"]["recurring"] + "</div>");
}

// Highlight any found errors
$(".text-danger").parent().addClass("has-error");
}

if (json["success"]) {
$(".breadcrumb").after('<div class="alert alert-success alert-dismissible">' + json["success"] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');

$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> ' + json["total"] + "</span>");

$("html, body").animate({
scrollTop: 0
}, "slow");

$("#cart > ul").load("index.php?route=common/cart/info ul li");
}
},
error: function (xhr, ajaxOptions, thrownError) {
alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
}
});
});
</script>
<script type="text/javascript">
	$(".date").datetimepicker({language: "{{ datepicker }}", pickTime: false});

$(".datetime").datetimepicker({language: "{{ datepicker }}", pickDate: true, pickTime: true});

$(".time").datetimepicker({language: "{{ datepicker }}", pickDate: false});

$("button[id^='button-upload']").on("click", function () {
var node = this;

$("#form-upload").remove();

$("body").prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

$("#form-upload input[name='file']").trigger("click");

if (typeof timer != "undefined") {
clearInterval(timer);
}

timer = setInterval(function () {
if ($("#form-upload input[name='file']").val() != "") {
clearInterval(timer);

$.ajax({
url: "index.php?route=tool/upload",
type: "post",
dataType: "json",
data: new FormData($("#form-upload")[0]),
cache: false,
contentType: false,
processData: false,
beforeSend: function () {
$(node).button("loading");
},
complete: function () {
$(node).button("reset");
},
success: function (json) {
$(".text-danger").remove();

if (json["error"]) {
$(node).parent().find("input").after('<div class="text-danger">' + json["error"] + "</div>");
}

if (json["success"]) {
alert(json["success"]);

$(node).parent().find("input").val(json["code"]);
}
},
error: function (xhr, ajaxOptions, thrownError) {
alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
}
});
}
}, 500);
});
</script>
<script type="text/javascript">
	$("#review").delegate(".pagination a", "click", function (e) {
e.preventDefault();

$("#review").fadeOut("slow");

$("#review").load(this.href);

$("#review").fadeIn("slow");
});

$("#review").load("index.php?route=product/product/review&product_id=       {{ product_id }}");

$("#button-review").on("click", function () {
$.ajax({
url: "index.php?route=product/product/write&product_id=       {{ product_id }}",
type: "post",
dataType: "json",
data: $("#form-review").serialize(),
beforeSend: function () {
$("#button-review").button("loading");
},
complete: function () {
$("#button-review").button("reset");
},
success: function (json) {
$(".alert-dismissible").remove();

if (json["error"]) {
$("#review").after('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> ' + json["error"] + "</div>");
}

if (json["success"]) {
$("#review").after('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json["success"] + "</div>");

$("input[name='name']").val("");
$("textarea[name='text']").val("");
$("input[name='rating']:checked").prop("checked", false);
}
}
});
});

$(document).ready(function () {
$(".thumbnails").magnificPopup({
type: "image",
delegate: "a",
gallery: {
enabled: true
}
});
});

$(document).ready(function () { // src update
$(".thum1 img").click(function () {
$("#main_cover").attr("src", $(this).attr("src"));
});
$(".thum1 img").click(function () {
$("#main_cover").attr("src", $(this).attr("src"));
});
});
</script>
{{ footer }}
