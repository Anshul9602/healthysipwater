
{{ header }}
<style>
  @media screen and (max-width:750px) {
    .container {
      padding: 0px;
    }

    .breadcrumb-area {
      display: none;
    }
  }
</style>
<style>
  .product-thumb .price-new {
    font-weight: 600;
    color: darkred;
    font-size: 16px;
  }

  .product-thumb .price-old {
    color: #999;
    text-decoration: line-through;
    margin-left: 10px;
  }

  .flair-badge:after {
    content: "";
    position: absolute;
    top: 10px;
    left: 0;
    float: left;
    width: 4px;
    height: 4px;
    -moz-border-radius: 2px;
    -webkit-border-radius: 2px;
    border-radius: 2px;
    background: #fff;
    -moz-box-shadow: -1px -1px 2px #f64d84;
    -webkit-box-shadow: -1px -1px 2px #f64d84;
    box-shadow: -1px -1px 2px #f64d84;
  }

  .size-strip {
    width: 100%;
    position: absolute;
    left: 0px;
    border: 0px;
    bottom: 70px;
    text-align: center;
    color: #fff;
    padding: 5px;
  }

  .row {
    margin: 0px;
  }

  .size-strip p {
    float: left;

  }

  .size-list {
    list-style: none;
    margin: 0;
    padding: 0;
    overflow: auto;
    opacity: 0;
  }

  .size-list li {
    display: inline-block;
    letter-spacing: normal;
    margin: 0 2.5px 0;
    background: #fff;
    width: 25px;
    height: 25px;
    color: #333;
    border-radius: 50%;
    text-align: center;
    line-height: 27.5px;

  }

  @media(hover: hover) and (pointer: fine) {
    .foo:hover img:last-child {
      display: inline-block
    }

  }

  .product-thumb:hover .size-list {
    opacity: 1;
  }



  .cate-caption {
    text-align: center;
    margin-top: -60px;
    text-transform: uppercase;
    font-family: 'brandon_grotesquemedium!important';
    color: #fff;
    letter-spacing: 1px;
  }

  .cate-caption {
    font-size: 42px;
    text-transform: uppercase;
    position: absolute;
    width: 100%;
    margin-top: -210px;
  }

  .sold-out {
    font-size: 12px;
  }

  @media screen and (max-width:750px) {
    .sold-out {
      font-size: 10px;
    }

    .cate-wrapper {
      margin-top: 100px;
    }

    .cate-caption {
      font-size: 18px;
      text-transform: uppercase;
      position: absolute;
      width: 100%;
      margin-top: -115px;
      font-family: 'brandon_grotesquemedium!important';
    }



    .size-strip {
      display: none !important;
    }
  }

  .product_name {
    font-size: 18px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    margin-top: 10px;
  }

  .foo img:last-child {
    display: none
  }

  .foo:hover img:first-child,
  .foo:active img:first-child,
  .foo:focus img:first-child {
    display: none
  }

  .foo:hover img:last-child,
  .foo:active img:last-child,
  .foo:focus img:last-child {
    display: inline-block
  }

  @media only screen and (max-width: 600px) {

    .product_name {
      font-size: 10px;
      margin-top: 10px;
    }

    .price-new {
      font-size: 10px !important;
    }

    .price-old {
      font-size: 8px;
    }
  }

  aside {
    max-width: 100% !important;
    background-color: #F9F9F9;
    padding: 20px 10px;
  }

  .catalog-category-view {
    width: 100%;
    text-align: center;
    background-image: url(cat-bcg-pattern.png);
    background-color: #fcfcfc;
    padding: 0px
  }

  body {
    background-color: #fff;
  }
</style>





<div style="padding: 0px; " class="container">

  <div class="row">
    <div class="col-sm-12">
      <div class="breadcrumb-wrap">
        <nav aria-label="breadcrumb">
          <ul class="breadcrumb">
            {% for breadcrumb in breadcrumbs %}

            <li class="breadcrumb-item"><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>

            {% endfor %}

             
          </ul>
        </nav>
        {% if products %}
        <div style="max-width: 350px;float:right; margin-top:-25px " class="form-group input-group input-group-sm">
          <label class="input-group-addon" for="input-limit" style="margin-right:10px;font-size:16px;">{{ text_limit }}</label>
          <select id="input-sort" class="form-control" onchange="location = this.value;" style="margin-right: 10px;">
            {% for limits in limits %}
            {% if limits.value == limit %}
                <option value="{{ limits.href }}" selected="selected">{{ limits.text }}</option>
                {% else %}
                <option value="{{ limits.href }}">{{ limits.text }}</option>
                {% endif %}
                {% endfor %}
          </select>
          <a class="filter" style="cursor:pointer">
            <li class="fa fa-filter"></li> Filters &nbsp;
          </a>

          <select id="input-sort" class="form-control" onchange="location = this.value;">
            {% for sorts in sorts %}
            {% if sorts.value == '%s-%s'|format(sort, order) %}
            <option value="{{ sorts.href }}" selected="selected">{{ sorts.text }}</option>
            {% else %}
            <option value="{{ sorts.href }}">{{ sorts.text }}</option>
            {% endif %}
            {% endfor %}
          </select>

        </div>
      </div>
    </div>

  </div>

 


<div class="row">
  {% if  column_left %}
  <div class="col-3">{{ column_left }}</div>
  <div class="col-9"> <div class="row">
    
    {% for product in products %}
    
    <div style="margin-bottom:20px" id="product_box" class="product-layout product-grid col-md-3 col-8 text-center">
      <div class="product-thumb">
        <div class="image">
          <a onclick="" href="{{ product.href }}">
            <img onclick="" style="z-index:99999999" src="{{ product.thumb }}" alt="{{ product.name }}"
              title="{{ product.name }}" class="img-responsive pthumb" />
          </a>

        </div>
        <div>


          <div class="caption">
            <a onclick="" href="{{ product.href }}">
              <h2 class="product_name" style="color:black;">{{ product.name }}</h2>
            </a>
            {% if product.price %}
            <p class="price">
              {% if not product.special %}
              {{ product.price }}
              {% else %}


              <span style="white-space:nowrap" class="price-new">{{ product.special }}&nbsp;<span
                  style="text-decoration:none; color: #1677BC">{{ product.percent }}% OFF</span> </span>
              <span style="white-space:nowrap" class="price-old">{{ product.price }}</span>
              {% endif %}
            </p>
            {% endif %}
          </div>

          {# {% if product.quantity  %}
                  <p class="sold-out">Sold Out</p>
               {% endif %} #}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="col-9"> <div class="row">
    
    {% for product in products %}
    
    <div style="margin-bottom:20px" id="product_box" class="product-layout product-grid col-md-3 col-8 text-center">
      <div class="product-thumb">
        <div class="image">
          <a onclick="" href="{{ product.href }}">
            <img onclick="" style="z-index:99999999" src="{{ product.thumb }}" alt="{{ product.name }}"
              title="{{ product.name }}" class="img-responsive pthumb" />
          </a>

        </div>
        <div>


          <div class="caption">
            <a onclick="" href="{{ product.href }}">
              <h2 class="product_name" style="color:black;">{{ product.name }}</h2>
            </a>
            {% if product.price %}
            <p class="price">
              {% if not product.special %}
              {{ product.price }}
              {% else %}


              <span style="white-space:nowrap" class="price-new">{{ product.special }}&nbsp;<span
                  style="text-decoration:none; color: #1677BC">{{ product.percent }}% OFF</span> </span>
              <span style="white-space:nowrap" class="price-old">{{ product.price }}</span>
              {% endif %}
            </p>
            {% endif %}
          </div>

          {# {% if product.quantity  %}
                  <p class="sold-out">Sold Out</p>
               {% endif %} #}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}
  </div>
 
</div>
 


</div>
{% endif %}


<script>
  $(".filter").click(function () {
    $(".filter-opener").slideToggle();
  })

  $(".filter-open").click(function () {

    $(".filter-slider").animate({
      'left': 0
    })
    $(".overlay").fadeIn();
  })

  $(".overlay").click(function () {
    $(".filter-slider").animate({
      'left': -250
    })
    $(".overlay").fadeOut();
  })
  $(document).ready(function (e) {
    $('.pagination li').each(function () {
      if ($(this).text() == '>' || $(this).text() == '<' || $(this).text() == '>|' || $(this).text() ==
        '|<') {
        $(this).css('display', 'none');
      }
    });
    var start_point = 6;
    var chunk = 6;
    var product_data = {{ product }};
    var imgss = <? php print_r(json_encode($images)); ?>;



    $(window).scroll(function () {
      if ($('#reached').offset().top < $(this).height() + $(this).scrollTop()) {
        var i;
        console.log(start_point);
        if (start_point < product_data.length) {
          for (i = start_point; i < (start_point + chunk); i++) {
            if (typeof product_data[i] === 'undefined') {
              break;
            } else {
              var p =
                '  <div style="margin-bottom:20px" class="product-layout product-grid col-md-3 col-sm-6 col-6 text-center">';
              p += '<div class="product-thumb">';
              p += ' <div class="image"><a class="foo" href="' + product_data[i]['href'] + '">';
              p += ' <img style="z-index:99999999" src="' + product_data[i]['thumb'] + '" alt="' +
                product_data[i]['name'] + '" title="' + product_data[i]['name'] +
                '" class="img-responsive pthumb" />';
              p += '<img src="' + imgss[product_data[i]['product_id']]['popup'] +
                '" class="img-responsive" /></a>';

              p += '<span class="size-strip"><ul class="size-list">';

              for (j = 0; j < product_data[i]['option'].length; j++) {
                if (product_data[i]['option'][j]['option_id'] == 13) {
                  for (k = 0; k < product_data[i]['option'][j]['product_option_value']
                    .length; k++) {
                    p += '<li>' + product_data[i]['option'][j]['product_option_value'][k][
                      'name'
                    ] + '</li>';
                  }
                }
              }


              p += '</ul></span></div>';
              p += '<div> <div class="caption"><p class="product_name">' + product_data[i]['name'] +
                '</p>';
              p += '<p class="price">';

              if (!product_data[i]['special']) {
                p += product_data[i]['price'];
              } else {

                p += '<span style="white-space:nowrap" class="price-new">' + product_data[i][
                  'special'
                ] + '</span> <span style="white-space:nowrap" class="price-old">' + product_data[
                i]['price'] + '</span>';
              }
              p += '</p></div>';

              if (product_data[i]['quantity'] == 0) {
                p += '<p class="sold-out">Sold Out</p>';
              }

              p += '</div>';
              $("#product_box").append(p);
            }

          }
        }

        start_point = start_point + chunk;
      }
    });

  });



  $('body').on("mouseenter", ".foo", function () {
    $(this).find('img').eq(0).css('display', "none");
    $(this).find('img').eq(1).css('display', "inline-block");
  })

  $('body').on("mouseleave", ".foo", function () {
    $(this).find('img').eq(1).css('display', "none");
    $(this).find('img').eq(0).css('display', "inline-block");
  })
</script>


{{ footer }}